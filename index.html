<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>HTML5サンプル</title>
<script src='https://api.mapbox.com/mapbox-gl-js/v1.4.1/mapbox-gl.js'></script>
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v1.4.1/mapbox-gl.css' rel='stylesheet' />
<style>
.mapboxgl-ctrl-compass { display: none; }
a.mapbox-improve-map {
	font-weight: normal !important;
	margin: 0px !important;
}
body {background-color: #ff0000}
</style>
</head>
<body>
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>
<div id='map' style='width: 512px; height: 512px;'></div>
<a id="downloadLink" href="" download="map.png">Download ↓</a>
<div id="image"></div>
<script>
/*
<div id='map' style='width: 696px; height: 630px;'></div>


		style: 'mapbox://styles/yoghurton/ck2o8028a0hrw1codtl5t773f',
		style: 'mapbox://styles/yoghurton/ck1ew552407gq1cmy3lvu3d50',
		style: 'mapbox://styles/yoghurton/ck2o8028a0hrw1codtl5t773f',
		style: 'mapbox://styles/yoghurton/ck2oiwbv00f2j1clfi9l3cxyf',
		style: 'mapbox://styles/yoghurton/ck2omczh70hiy1cqqvour6mxs',
		style: 'mapbox://styles/yoghurton/ck2or3qot031b1cqgjd96hcmc',
		style: 'mapbox://styles/yoghurton/ck2ozb3vd01v51co72x7xkk18',
			"circle-color": "#4fa882",
			"circle-color": "#b2172c",
			"circle-color": "#4be3cd",
			"circle-color": "#4be3cd",
		center: [12.410156, 28.651208],
		center: [136.441335, 35.878395],

		zoom: 4.0,
		pitch: 40,
		bearing: -25,

		style: 'mapbox://styles/yoghurton/ck2ozb3vd01v51co72x7xkk18',
		style: 'mapbox://styles/yoghurton/ckeydnrb319h11aqpec2uavde',
		style: 'mapbox://styles/yoghurton/ck2omczh70hiy1cqqvour6mxs',
*/

	mapboxgl.accessToken = 'pk.eyJ1IjoieW9naHVydG9uIiwiYSI6ImNrMWMzaTRodTAwMXkzbG5wdXJvMXFuYXoifQ.7TYzn64qL5_Kktp--kX6Dw';
	var map = new mapboxgl.Map({
		container: 'map',
		style: 'mapbox://styles/yoghurton/ckj0rnr6d449a19rrsqbli7uk',
		center: [135.783178,34.715461],
		zoom: 7.25,
		preserveDrawingBuffer: true
	});

/*
		center: [135.441335, 35.878395],

*/

map.on("load", function() {

    map.addSource("cells", {
    	"type": "geojson",
    	"data": {
    		"type": "FeatureCollection",
    		"features":
[
{"type": "Feature", "geometry": {"type": "LineString","coordinates": [[140.477685,41.303562],[141.726310,40.537567],[143.169132,41.086293],[141.935777,41.885495],[140.477685,41.303562]]}, "properties": {"cell": "NR16-BRAVO-14"}},
{"type": "Feature", "geometry": {"type": "LineString","coordinates": [[139.054089,40.707123],[140.314546,39.974148],[141.726310,40.537567],[140.477685,41.303562],[139.054089,40.707123]]}, "properties": {"cell": "NR16-BRAVO-13"}},
{"type": "Feature", "geometry": {"type": "LineString","coordinates": [[140.314546,39.974148],[141.530503,39.238612],[142.928303,39.770261],[141.726310,40.537567],[140.314546,39.974148]]}, "properties": {"cell": "NR16-BRAVO-02"}},
{"type": "Feature", "geometry": {"type": "LineString","coordinates": [[138.935125,39.397697],[140.161913,38.693712],[141.530503,39.238612],[140.314546,39.974148],[138.935125,39.397697]]}, "properties": {"cell": "NR16-BRAVO-07"}},
{"type": "Feature", "geometry": {"type": "LineString","coordinates": [[140.161913,38.693712],[141.347016,37.987815],[142.702796,38.502356],[141.530503,39.238612],[140.161913,38.693712]]}, "properties": {"cell": "NR16-BRAVO-04"}},
{"type": "Feature", "geometry": {"type": "LineString","coordinates": [[138.823718,38.137102],[140.018765,37.461319],[141.347016,37.987815],[140.161913,38.693712],[138.823718,38.137102]]}, "properties": {"cell": "NR16-BRAVO-05"}},
{"type": "Feature", "geometry": {"type": "LineString","coordinates": [[140.018765,37.461319],[140.018765,36.300150],[141.347016,36.820660],[141.347016,37.987815],[140.018765,37.461319]]}, "properties": {"cell": "PA02-ALPHA-00"}},
{"type": "Feature", "geometry": {"type": "LineString","coordinates": [[137.589076,38.809891],[138.823718,38.137102],[140.161913,38.693712],[138.935125,39.397697],[137.589076,38.809891]]}, "properties": {"cell": "NR16-BRAVO-06"}},
{"type": "Feature", "geometry": {"type": "LineString","coordinates": [[138.719142,36.924298],[138.719142,35.769633],[140.018765,36.300150],[140.018765,37.461319],[138.719142,36.924298]]}, "properties": {"cell": "PA01-ALPHA-15"}},
{"type": "Feature", "geometry": {"type": "LineString","coordinates": [[137.516876,37.570334],[138.719142,36.924298],[140.018765,37.461319],[138.823718,38.137102],[137.516876,37.570334]]}, "properties": {"cell": "NR16-ALPHA-10"}},
{"type": "Feature", "geometry": {"type": "LineString","coordinates": [[140.018765,36.300150],[140.018765,35.122480],[141.347016,35.636037],[141.347016,36.820660],[140.018765,36.300150]]}, "properties": {"cell": "PA02-ALPHA-01"}},
]
		}
	});


map.addLayer({
'id': 'cells',
'type': 'line',
'source': 'cells',
'layout': {
'line-join': 'round',
'line-cap': 'round'
},
'paint': {
'line-color': '#ff6e00',
'line-width': 2,
}
});




$("a.mapbox-improve-map").text("");
//$("a.mapbox-improve-map").text("© Enlightened Today Japan");
});


var dpi = 300;
Object.defineProperty(window, 'devicePixelRatio', {
    get: function() {return dpi / 96}
});

    $('#downloadLink').click(function() {
        var img = map.getCanvas().toDataURL('image/png')
        this.href = img
    })

</script>
</body>
</html>


